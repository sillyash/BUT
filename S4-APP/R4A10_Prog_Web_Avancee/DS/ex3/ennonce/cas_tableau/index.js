let contenu_du_main = {"tag":"MAIN","attributs":[],"fils":[{"tag":"SECTION","attributs":[],"fils":[{"tag":"DIV","attributs":[],"fils":[{"tag":"H1","attributs":[],"fils":[{"texte":"La table des réalités inaliénables"}]}]},{"tag":"ARTICLE","attributs":[],"fils":[{"tag":"TABLE","attributs":[],"fils":[{"tag":"CAPTION","attributs":[],"fils":[{"texte":"Loremum Ipsummium"}]},{"tag":"THEAD","attributs":[],"fils":[{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":""}]},{"tag":"TH","attributs":[],"fils":[{"texte":"Col 1"}]},{"tag":"TH","attributs":[["colspan","2"]],"fils":[{"texte":"Col 2/3"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"Col 4"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"Col 5"}]},{"tag":"TH","attributs":[["colspan","2"]],"fils":[{"texte":"Col 6/7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":""}]},{"tag":"TH","attributs":[],"fils":[{"texte":"sub 1"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"sub 2"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"sub 3"}]},{"tag":"TH","attributs":[["colspan","2"]],"fils":[{"texte":"sub 4/5"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"sub 6"}]},{"tag":"TH","attributs":[],"fils":[{"texte":"sub 7"}]}]}]},{"tag":"TBODY","attributs":[],"fils":[{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 1."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 1.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 2."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 2.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 2.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 2.3"}]},{"tag":"TD","attributs":[["colspan","2"]],"fils":[{"texte":"C 2.4/5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 2.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 2.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 3."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 3.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[["rowspan","2"]],"fils":[{"texte":"Ligne 4/5."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.1"}]},{"tag":"TD","attributs":[["rowspan","2"]],"fils":[{"texte":"C 4/5.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 4.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 5.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 6."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 6.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 7."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 7.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[["rowspan","3"]],"fils":[{"texte":"Ligne 8/9/10."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 8.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 8.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 8.3"}]},{"tag":"TD","attributs":[["colspan","2"],["rowspan","3"]],"fils":[{"texte":"C 8/9/10.4/5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 8.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 8.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":"C 9.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 9.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 9.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 9.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 9.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":"C 10.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 10.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 10.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 10.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 10.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 11."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 11.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 12."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 12.7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[["rowspan","2"]],"fils":[{"texte":"Ligne 13/14."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 13.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 13.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 13.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 13.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 13.5"}]},{"tag":"TD","attributs":[["colspan","2"],["rowspan","2"]],"fils":[{"texte":"C 13/14.6/7"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TD","attributs":[],"fils":[{"texte":"C 14.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 14.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 14.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 14.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 14.5"}]}]},{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Ligne 15."}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"C 15.7"}]}]}]},{"tag":"TFOOT","attributs":[],"fils":[{"tag":"TR","attributs":[],"fils":[{"tag":"TH","attributs":[],"fils":[{"texte":"Agrégations"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 1"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 2"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 3"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 4"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 5"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 6"}]},{"tag":"TD","attributs":[],"fils":[{"texte":"A 7"}]}]}]}]}]}]}]} ;

function handle_attributs(node, attributs) {
	for (let attr of attributs) {
		 let type = attr[0];
		 let val = attr[1];
		 if (type == 'class') node.classList.add(val);
		 else console.info(`Attribut de type ${type} : ${val}`);
	}
}


function handle_fils(parent, fils) {
	for (let elem of fils) {
		 if (elem.texte) {
				parent.innerText = elem.texte;
				continue;
		 }

		 let node = document.createElement(elem.tag);
		 handle_attributs(node, elem.attributs);
		 parent.appendChild(node);
		 if (elem.fils) handle_fils(node, elem.fils);
	}
}

function main() {
	let main = document.querySelector('main');
	console.log(contenu_du_main);

	handle_attributs(main, contenu_du_main.attributs);
	handle_fils(main, contenu_du_main.fils);
}


document.addEventListener(
 "DOMContentLoaded",
 (event) => main()
);
